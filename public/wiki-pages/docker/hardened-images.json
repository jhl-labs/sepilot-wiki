{
  "title": "Docker/Hardened Images",
  "slug": "docker/hardened-images",
  "content": "---\ntitle: Docker Hardened Images 무료 제공: 보안 실무 가이드\nauthor: SEPilot AI\nstatus: published\ntags: [Docker, Hardened Images, Security, Vulnerability Management, Supply Chain]\nredirect_from:\n  - hardened-images-are-free-now-what\norder: 1\n---\n\n## 1. 서론\nDocker Hardened Images(DHI)가 **무료**로 제공되면서 조직의 컨테이너 보안 운영 방식에 큰 변화가 예상됩니다.  \n본 문서는 **보안 팀**, **플랫폼 팀**, **DevOps** 담당자를 주요 독자로 하여, DHI 도입 시 고려해야 할 전략·프로세스를 정리합니다.  \n\n## 2. Hardened Images 개요\n- **지원 이미지**: Alpine, Debian 및 데이터베이스, 런타임, 메시지 버스 등을 포함한 **1,000개 이상의 공식 이미지**가 DHI에 포함됩니다【Docker Blog】.  \n- **보안 패치 제공 방식**: Docker 보안 팀이 직접 취약점 수정을 적용하고, 패치된 이미지를 Docker가 관리하는 레지스트리에서 제공합니다. 이를 통해 사용자는 별도의 패치 적용 작업 없이 최신 보안 이미지만 Pull 하면 됩니다【Docker Blog】.  \n\n## 3. 보안 경제성의 변화\n- **기존 비용 구조**: 이전에는 프리미엄 이미지나 서드파티 보안 솔루션에 별도 비용을 지불해야 했습니다.  \n- **무료 DHI 도입 효과**: 이미지 자체 비용이 사라짐에 따라 **취약점 관리 예산**을 스캔 도구, 운영 자동화, 인시던트 대응 등 다른 보안 활동에 재배분할 수 있습니다. 구체적인 비용 절감 규모는 조직별 사용량에 따라 다르므로 **추가 조사가 필요합니다**.  \n\n## 4. “보안 워터라인” 개념\nDocker는 DHI에 **보안 “워터라인”(waterline)** 을 정의합니다.  \n\n| 영역 | 책임 주체 | 설명 |\n|------|----------|------|\n| **워터라인 이하** | Docker | OS·런타임 레이어에 대한 취약점 관리·패치가 Docker에 의해 수행됩니다. 스캐너가 이 레이어에서 발견한 취약점은 사용자가 직접 조치할 필요가 없습니다. |\n| **워터라인 이상** | 사용자 | 애플리케이션 코드, 직접 추가한 의존성, 커스텀 레이어 등에 대한 취약점은 기존과 동일하게 사용자가 관리합니다. |\n\n- **이미지 선택에 따른 워터라인 위치**: 예를 들어, **hardened python 이미지**는 OS와 Python 런타임까지 포함하므로 워터라인이 높은 수준에 위치합니다. 반면, **hardened base 이미지**에 자체 런타임을 추가하면 워터라인이 낮아져 사용자가 관리해야 할 영역이 늘어납니다【Docker Blog】.  \n\n## 5. 운영·배포 프로세스 변화\n1. **자동 Pull**: CI/CD 파이프라인에서 `docker pull` 명령을 최신 DHI 태그(예: `docker.io/library/python:3.11-hardened`) 로 교체합니다.  \n2. **이미지 태그 정책**: `-hardened` 접미사를 사용해 DHI와 일반 이미지 구분을 명확히 합니다.  \n3. **재배포 절차**: 패치된 DHI가 릴리스될 때마다 자동으로 최신 이미지를 Pull하고, 롤링 업데이트를 수행합니다.  \n4. **고려사항**: 기존 파이프라인에 이미지 스캐너가 포함된 경우, 스캐너가 워터라인 이하 레이어를 무시하도록 설정이 필요합니다.  \n\n## 6. 공급망 격리와 신뢰 모델\n- **커뮤니티 이미지와 DHI 이미지의 차이**: `python:3.11` 같은 커뮤니티 이미지는 **태그 변조**, **유출된 PAT** 등으로 공급망 공격에 노출될 위험이 있습니다. Shai Hulud 캠페인에서는 공격자가 도난당한 PAT와 태그 가변성을 이용해 악성 레이어를 삽입한 사례가 보고되었습니다【Docker Blog】.  \n- **DHI 공급망 방어**: Docker는 **소스 재빌드**, **리뷰 프로세스**, **쿨다운 기간**을 적용해 이미지가 Docker 관리 네임스페이스에 안전하게 배포됩니다. 이러한 절차 덕분에 공급망 공격은 DHI 경계에서 차단됩니다【Docker Blog】.  \n- **제한점**: DHI가 제공하는 워터라인 이하 레이어는 Docker가 관리하지만, 위 레이어에 대한 취약점은 여전히 사용자 책임이므로 지속적인 스캔·패치가 필요합니다.  \n\n## 7. 마이그레이션 가이드\n### 7.1 현재 사용 중인 이미지 식별\n- 레지스트리에서 `docker images` 명령을 활용해 사용 중인 베이스 이미지와 태그를 목록화합니다.  \n- CI/CD 파이프라인 정의 파일(`Dockerfile`, `helm chart`, `kustomize`)에서 직접 지정된 이미지명을 추출합니다.  \n\n### 7.2 전환 단계별 체크리스트\n| 단계 | 작업 내용 |\n|------|-----------|\n| **1. 조사** | 사용 중인 이미지가 DHI에 포함되는지 확인(Alpine, Debian, 공식 DB/런타임 등). |\n| **2. 테스트** | 스테이징 환경에 DHI 이미지(`*-hardened`)를 적용하고, 애플리케이션 정상 동작 여부를 검증합니다. |\n| **3. CI/CD 업데이트** | 파이프라인에서 이미지 태그를 DHI 버전으로 교체하고, 스캐너 설정을 워터라인 이하 레이어 무시하도록 조정합니다. |\n| **4. 롤아웃** | 프로덕션에 점진적 배포(블루‑그린, 카나리) 방식으로 적용합니다. |\n| **5. 모니터링** | 배포 후 로그·메트릭을 확인하고, 필요 시 즉시 롤백합니다. |\n\n### 7.3 호환성 테스트 및 롤백 전략\n- **호환성 테스트**: 기존 이미지와 DHI 이미지 간 라이브러리 버전 차이를 검증합니다.  \n- **롤백**: 이미지 태그를 이전 버전으로 되돌리고, 배포 파이프라인을 재실행할 수 있도록 GitOps 정책을 마련합니다.  \n\n## 8. 보안 베스트 프랙티스\n- **워터라인 위·아래 영역별 관리**  \n  - *아래*: Docker가 제공하는 최신 DHI 이미지를 정기적으로 Pull하고, 자동 재배포 파이프라인을 유지합니다.  \n  - *위*: 애플리케이션 코드, 직접 추가한 의존성, 커스텀 레이어에 대해 정기적인 이미지 스캔·패치를 수행합니다.  \n- **이미지 레이어 최소화**: 불필요한 레이어를 제거하고, 멀티‑스테이지 빌드를 활용해 최종 이미지 크기를 최소화합니다.  \n- **정기 스캔 주기**: CI 단계에서 최소 **일일 1회** 이상 이미지 스캔을 실행하고, 새로운 CVE가 발표될 때마다 DHI 업데이트를 확인합니다.  \n\n## 9. 모니터링·컴플라이언스\n- **보안 지표(KPI)**  \n  - *워터라인 이하 이미지 최신 적용 비율* (예: 100% 최신 DHI 사용)  \n  - *워터라인 위 레이어 취약점 발견 건수*  \n  - *패치 적용 평균 소요 시간*  \n- **감사 로그**: Docker 레지스트리 접근 로그와 CI/CD 배포 로그를 연계해 이미지 Pull·배포 이력을 추적합니다.  \n- **정책 준수 확인**: 조직 내부 정책에 따라 DHI 사용 여부를 자동 검증하는 정책 엔진(OPA 등)을 도입할 수 있습니다.  \n\n## 10. 자주 묻는 질문(FAQ)\n**Q1. 무료 DHI가 제공하는 보안 수준은?**  \nA: DHI는 OS·런타임 레이어에 대한 최신 보안 패치를 Docker 보안 팀이 직접 적용합니다. 따라서 워터라인 이하 레이어는 Docker가 책임지고 관리합니다【Docker Blog】.\n\n**Q2. 이미 사용 중인 사내 커스텀 이미지와 어떻게 병합하나요?**  \nA: 커스텀 이미지의 베이스를 DHI 이미지(`*-hardened`)로 교체하고, 기존 레이어를 그대로 위에 쌓는 방식으로 병합합니다. 이때 베이스 이미지 교체 후 애플리케이션 테스트를 반드시 수행해야 합니다.\n\n**Q3. Docker가 제공하는 보안 패치 주기는?**  \nA: Docker는 취약점이 확인되는 즉시 해당 레이어를 재빌드하고, 새로운 DHI 이미지를 릴리스합니다. 정확한 주기는 취약점 발생 시점에 따라 다르므로 **추가 조사가 필요합니다**.\n\n## 11. 참고 자료 및 링크\n- Docker 블로그 원문: *[Hardened Images Are Free. Now What?](https://www.docker.com/blog/hardened-images-free-now-what/)* (2026‑02‑10)【Docker Blog】  \n- Docker 보안 팀 발표 자료: (추후 추가)  \n- Shai Hulud 공급망 공격 사례: (Docker 블로그 내 언급)【Docker Blog】  \n- OCI 이미지 표준: <https://opencontainers.org/> (공식 문서)  \n\n---",
  "lastModified": "2026-02-23T00:23:27Z",
  "author": "GitHub Action",
  "status": "draft",
  "isDraft": true,
  "isInvalid": false,
  "tags": [],
  "history": [
    {
      "sha": "ecef4ef",
      "message": "chore: 뉴스 인텔리전스 보고서 업데이트",
      "author": "GitHub Action",
      "authorEmail": "action@github.com",
      "date": "2026-02-23T00:23:27Z",
      "isAutoCommit": false,
      "additions": 0,
      "deletions": 0
    }
  ]
}