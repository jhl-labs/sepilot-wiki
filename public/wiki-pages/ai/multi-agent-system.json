{
  "title": "멀티 에이전트 시스템 – Self‑Healing AI Agents",
  "slug": "ai/multi-agent-system",
  "content": "\n# 멀티 에이전트 시스템 – Self‑Healing AI Agents\n\n> 이 문서는 **Self‑Healing AI Agents**(자체 복구 AI 에이전트) 구현 사례를 기반으로, 대규모 자율 에이전트 아키텍처와 8 GB VRAM 환경에서의 효율적인 배포 방법을 소개합니다. 원본 내용은 [euno.news](https://euno.news/posts/ko/i-built-4882-self-healing-ai-agents-on-8-gb-vram-h-f27aa8)에서 발췌했습니다.\n\n---\n\n## 1. Self‑Healing Architecture Overview\n\n대부분의 LLM‑기반 에이전트는 단순한 흐름을 따릅니다.\n\n```\nreceive task → call model → return result\n```\n\n오류(환각, 타임아웃, OOM 등)가 발생하면 에이전트가 충돌하거나 쓰레기를 출력합니다. 기존의 `try‑catch` 방식은 임시 방편에 불과합니다. **자체 복구 루프**를 도입해 에이전트가 스스로 상태를 모니터링하고, 필요 시 복구 전략을 실행하도록 설계합니다.\n\n### 핵심 루프 구조\n\n```\n┌─────────────┐\n│   EXECUTE   │ ← 에이전트가 작업 수행\n└──────┬──────┘\n       │\n┌──────▼──────┐\n│   MONITOR   │ ← 실시간 건강 점수 측정\n└──────┬──────┘\n       │\n┌──────▼──────┐\n│   RECOVER   │ ← 계층적 복구 전략\n└──────┬──────┘\n       │\n       └──────→ EXECUTE 로 돌아감\n```\n\n이 루프는 단순 재시도(retry)가 아닙니다. 각 단계에서 **근본 원인을 진단**하고, 상황에 맞는 복구 전략을 선택합니다.\n\n### 1.1 에이전트 상태 머신\n\n에이전트는 다섯 가지 상태 중 하나에 있으며, 상태 전이는 건강 점수에 따라 자동으로 결정됩니다.\n\n```python\nfrom enum import Enum\n\nclass AgentState(Enum):\n    IDLE = \"idle\"              # 유휴 상태\n    RUNNING = \"running\"        # 정상 실행 중\n    DEGRADED = \"degraded\"      # 기능은 있지만 성능 저하\n    RECOVERING = \"recovering\"  # 자체 복구 중\n    FAILED = \"failed\"          # 외부 개입 필요\n```\n\n*핵심 인사이트*: `DEGRADED`는 `FAILED`와 다르며, 대부분의 오류는 여기서 조기에 감지·복구됩니다. 실제 운영에서 **97.7 %** 이상의 오류가 `DEGRADED` 단계에서 자동 복구되며, `FAILED` 상태에 도달하는 비율은 **2.3 %**에 불과합니다.\n\n### 1.2 건강 점수(Health Score)\n\n매 실행 사이클마다 다섯 가지 지표를 가중 합산하여 복합 건강 점수를 산출합니다.\n\n```python\ndef compute_health(agent_output, context):\n    scores = {\n        \"coherence\":    check_coherence(agent_output),       # 응답 일관성\n        \"completeness\": check_completeness(agent_output, context),  # 완전성\n        \"latency\":      check_latency(context.elapsed_time), # 응답 시간\n        \"memory\":       check_memory_usage(),                # 메모리 사용량\n        \"consistency\":  check_cross_agent_consistency(agent_output)  # 에이전트 간 일관성\n    }\n    weights = [0.25, 0.20, 0.15, 0.25, 0.15]\n    return sum(s * w for s, w in zip(scores.values(), weights))\n```\n\n| 지표 | 가중치 | 설명 |\n|------|--------|------|\n| coherence | 25% | 응답의 논리적 일관성 |\n| completeness | 20% | 작업 요구사항 충족 여부 |\n| latency | 15% | 응답 지연 시간 임계값 준수 |\n| memory | 25% | VRAM/RAM 사용량 안전 범위 |\n| consistency | 15% | 다른 에이전트와의 출력 일관성 |\n\n건강 점수가 임계값 이하이면 복구 전략을 선택하고 실행합니다.\n\n---\n\n## 2. Resource‑Efficient Deployment (8 GB VRAM)\n\n### 2.1 동적 에이전트 풀링\n\n8 GB VRAM을 가진 단일 머신에서 4,882개의 에이전트를 실행하기 위해 **동적 에이전트 풀링**을 사용합니다. 한 번에 GPU에 상주하는 에이전트 수는 약 12개이며, 나머지는 CPU/디스크에 직렬화됩니다.\n\n```python\nfrom queue import PriorityQueue\n\nclass AgentPool:\n    def __init__(self, max_concurrent=12, vram_budget_mb=7168):\n        self.active   = PriorityQueue()   # priority = urgency\n        self.dormant  = {}                # serialized agents\n        self.vram_budget = vram_budget_mb\n\n    def activate(self, agent_id, priority):\n        # VRAM 예산의 85%를 초과하면 우선순위가 낮은 에이전트를 퇴거\n        while self.current_vram() > self.vram_budget * 0.85:\n            _, evicted = self.active.get()\n            self.dormant[evicted.id] = evicted.serialize()\n            evicted.release_gpu()\n\n        agent = self.dormant.pop(agent_id).deserialize()\n        self.active.put((priority, agent))\n        return agent\n```\n\n### 2.2 최적화 기법\n\n| 기법 | 효과 | 설명 |\n|------|------|------|\n| 4‑bit 양자화 | VRAM 75% 절감 | 모델 가중치를 4비트로 압축 |\n| KV‑캐시 공유 | 메모리 40% 절감 | 유사한 컨텍스트의 에이전트 간 캐시 재사용 |\n| 동적 풀링 | 동시 실행 제어 | 우선순위 기반 에이전트 활성화/비활성화 |\n| 디스크 직렬화 | 무제한 에이전트 수 | 비활성 에이전트를 디스크에 저장 |\n\n4‑bit 양자화와 KV‑캐시 공유를 결합하면 평균 활성화 지연 시간은 **약 850 ms** 수준입니다. 클라우드 없이, API 호출 없이, 감독 없이 단일 소비자 하드웨어에서 운영이 가능합니다.\n\n---\n\n## 3. Failure Detection & Automatic Recovery\n\n### 3.1 실시간 모니터링\n\n에이전트는 매 실행 사이클 후 **복합 건강 점수**를 계산하고, 점수가 임계값 이하이면 `RECOVER` 단계로 전이합니다. 모니터링은 에이전트 외부가 아닌 **에이전트 내부**에 내장되어 있어, 별도의 모니터링 인프라 없이도 자체적으로 상태를 감지합니다.\n\n### 3.2 계층적 복구 전략\n\n복구 전략은 오류의 심각도에 따라 세 단계로 나뉩니다.\n\n| 단계 | 복구 전략 | 대상 오류 | 예시 |\n|------|-----------|-----------|------|\n| Level 1 | 재시도 + 파라미터 재조정 | 경미한 오류 | 환각, 일시적 타임아웃 |\n| Level 2 | GPU 슬롯 이동 + 메모리 압축 | 자원 부족 | OOM, VRAM 초과 |\n| Level 3 | FAILED 전이 + 외부 개입 요청 | 심각한 오류 | 모델 손상, 하드웨어 장애 |\n\n### 3.3 복구 성과\n\n이러한 접근 방식은 단순 재시도 루프 대비 다음과 같은 개선을 달성합니다.\n\n- 오탐지 실패(false‑positive failure) **73 % 감소**\n- 전체 에이전트 중 FAILED 도달 비율 **2.3 %**\n- 평균 복구 시간(MTTR) **< 2 초**\n\n---\n\n## 4. 실험 결과\n\n아래 결과는 **독립 LLM 심판**이 구조화된 루브릭을 사용해 블라인드 평가한 것이며, 자체 보고가 아닙니다.\n\n| 지표 | 결과 | 비고 |\n|------|------|------|\n| 승률 | 96.5 % (201/208) | 토론 에이전트 블라인드 평가 |\n| 평균 심판 점수 | 4.68 / 5.0 | 독립 LLM 심판 |\n| 전체 품질 | 93.6 % | 복합 품질 지표 |\n| 접근성 | 5.0 / 5.0 | 사용 편의성 |\n| 안전 점수 | 4.6 / 5.0 | 안전성 평가 |\n\n---\n\n## 5. 기존 접근법과의 비교\n\n| 항목 | 기존 try‑catch 방식 | Self‑Healing 방식 |\n|------|---------------------|-------------------|\n| 오류 대응 | 수동 재시작 | 자동 감지·복구 |\n| 확장성 | GPU당 1‑2 에이전트 | GPU당 4,882+ 에이전트 |\n| 클라우드 의존 | API 호출 필요 | 로컬 실행 가능 |\n| 복구 시간 | 분 단위 (인간 개입) | 초 단위 (자동) |\n| 모니터링 | 외부 인프라 필요 | 에이전트 내장 |\n\n---\n\n## 6. 적용 시 고려사항\n\n1. **하드웨어 요구사항**: 최소 8 GB VRAM GPU (소비자급 가능)\n2. **양자화 트레이드오프**: 4‑bit 양자화는 모델 정확도를 소폭 희생하므로, 정밀도가 중요한 작업에서는 8‑bit 이상 권장\n3. **에이전트 간 통신**: 대규모 에이전트 풀에서는 메시지 큐 기반 비동기 통신이 효율적\n4. **직렬화 비용**: 디스크 I/O가 병목이 될 수 있으므로, NVMe SSD 사용 권장\n5. **건강 점수 튜닝**: 도메인에 따라 가중치 조정이 필요하며, 초기에는 보수적 임계값 설정을 추천\n\n---\n\n## 7. 참고 자료\n\n- 원본 기사: [euno.news – 8 GB VRAM으로 4,882개의 Self‑Healing AI Agents 구축](https://euno.news/posts/ko/i-built-4882-self-healing-ai-agents-on-8-gb-vram-h-f27aa8)\n- 관련 위키: [AI 에이전트 시스템 개요](../ai/)\n\n---\n\n*이 문서는 Issue #199를 기반으로 작성·업데이트되었습니다.*\n",
  "lastModified": "2026-02-22T01:23:44Z",
  "author": "GitHub Action",
  "status": "published",
  "isDraft": false,
  "isInvalid": false,
  "tags": [
    "멀티 에이전트",
    "Self‑Healing",
    "AI",
    "아키텍처",
    "자율 에이전트",
    "자원 효율"
  ],
  "order": 9,
  "history": [
    {
      "sha": "d169209",
      "message": "🌳 Wiki Tree Maintenance: Wiki 전체 45개의 문서가 9개의 주요 카테고리와 1개의 신규 카테고리(aws)로 구성돼 있습니다. 루트 레벨에 존재하는 2개의 파일(212.md, 207.md)과 삭제된 중복 파일이 발견되었습니다. 일부 문서는 동일 내용이 여러 위치에 존재해 병합이 필요합니다. 파일명은 대부분 slug 형태이지만, 루트 파일은 적절한 카테고리로 이동하고, 삭제된 파일에 대한 리다이렉트를 추가해야 합니다.",
      "author": "GitHub Action",
      "authorEmail": "action@github.com",
      "date": "2026-02-22T01:23:44Z",
      "additions": 0,
      "deletions": 0
    },
    {
      "sha": "9a92c16",
      "message": "docs: Issue #203 - MCP 문서에 SonarCloud 자동화 파이프라인 사례 추가",
      "author": "JHL",
      "authorEmail": "bkperio@gmail.com",
      "date": "2026-02-22T10:20:27+09:00",
      "additions": 0,
      "deletions": 0
    },
    {
      "sha": "b7db918",
      "message": "Merge branch 'main' of https://github.com/jhl-labs/sepilot-wiki",
      "author": "GitHub Action",
      "authorEmail": "action@github.com",
      "date": "2026-02-21T13:04:23Z",
      "additions": 0,
      "deletions": 0
    },
    {
      "sha": "65c9afd",
      "message": "Merge branch 'main' of https://github.com/jhl-labs/sepilot-wiki",
      "author": "GitHub Action",
      "authorEmail": "action@github.com",
      "date": "2026-02-21T13:02:51Z",
      "additions": 0,
      "deletions": 0
    },
    {
      "sha": "3cd7bad",
      "message": "🌳 Wiki Tree Maintenance: 전체 38개의 문서가 존재하며, 루트 레벨에 파일이 다수 존재하고 일부 중복·불필요한 문서가 발견되었습니다. 주요 문제는 루트에 위치한 문서들을 적절한 카테고리로 이동하지 않은 점, 동일 주제의 문서가 중복되어 관리가 어려운 점, 파일명 표준화가 부족한 점입니다.",
      "author": "GitHub Action",
      "authorEmail": "action@github.com",
      "date": "2026-02-21T11:20:48Z",
      "additions": 0,
      "deletions": 0
    },
    {
      "sha": "bd64013",
      "message": "🔗 교차 참조 업데이트: 5개 문서",
      "author": "GitHub Action",
      "authorEmail": "action@github.com",
      "date": "2026-02-20T12:20:59Z",
      "additions": 0,
      "deletions": 0
    },
    {
      "sha": "e0d1a24",
      "message": "🌳 Wiki Tree Maintenance: Wiki는 23개의 문서가 5개의 주요 카테고리(projects, ai, kubernetes, bun, reports)로 나뉘어 있습니다. 대부분 파일명은 이미 slug 형태이며, 내용 중 중복된 문서는 Opencode 관련 두 파일뿐입니다. ‘reports’ 카테고리는 문서가 1개뿐이라 향후 통합을 검토할 필요가 있습니다. 전체 구조는 논리적이지만, 일부 파일명을 더 일관된 형태로 정규화하고, 카테고리 메타데이터와 문서 순서를 명시하면 가독성과 탐색성이 크게 향상됩니다.",
      "author": "GitHub Action",
      "authorEmail": "action@github.com",
      "date": "2026-02-20T02:07:27Z",
      "additions": 0,
      "deletions": 0
    },
    {
      "sha": "02eda25",
      "message": "🌳 Wiki Tree Maintenance: 전체 22개의 문서가 5개의 주요 카테고리( reports, kubernetes, projects, bun, ai )에 고르게 배치되어 있으나,  가 중복된 내용이며 삭제 상태이므로  로 병합이 필요합니다. 또한 모든 카테고리마다 문서 순서를 지정하고, 카테고리 메타데이터를 추가해 한국어 표시명과 정렬 순서를 정의하면 탐색성이 향상됩니다.",
      "author": "GitHub Action",
      "authorEmail": "action@github.com",
      "date": "2026-02-20T01:42:05Z",
      "additions": 0,
      "deletions": 0
    },
    {
      "sha": "9459c99",
      "message": "🌳 Wiki Tree Maintenance: 전체 22개의 문서가 5개의 주요 카테고리( reports, ai, kubernetes, projects, bun )에 분산되어 있다. 루트 레벨에 존재하는 Qwen3.5 문서가 중복되어 있으며, 루트에 파일이 존재하는 것은 금지 규칙을 위반한다. 또한 동일한 Opencode 문서가 두 개 존재하지만 하나는 이미 deleted 상태이므로 삭제만으로 충분하다. 파일명은 대부분 slug 규칙을 따르고 있어 별도 rename이 필요하지 않다. 각 카테고리별 문서 순서를 정리하고, 카테고리 메타데이터를 추가하면 탐색성이 향상된다.",
      "author": "github-actions[bot]",
      "authorEmail": "github-actions[bot]@users.noreply.github.com",
      "date": "2026-02-19T02:01:59Z",
      "additions": 0,
      "deletions": 0
    },
    {
      "sha": "e9ead79",
      "message": "🌳 Wiki Tree Maintenance: 전체 23개의 문서가 5개의 주요 카테고리(projects, ai, kubernetes, bun, reports)로 나뉘어 있습니다. 루트에 위치한 Qwen3.5 문서가 ai 카테고드와 중복되어 있으며, Opencode 관련 중복 문서가 존재합니다. 파일명은 대부분 slug 형태이지만, 루트에 남아 있는 문서는 이동이 필요합니다. 각 카테고리 내 문서 순서를 정의하고, 카테고리 메타데이터를 추가하면 탐색성이 향상됩니다.",
      "author": "github-actions[bot]",
      "authorEmail": "github-actions[bot]@users.noreply.github.com",
      "date": "2026-02-19T01:41:58Z",
      "additions": 0,
      "deletions": 0
    },
    {
      "sha": "894b632",
      "message": "🔗 교차 참조 업데이트: 7개 문서",
      "author": "github-actions[bot]",
      "authorEmail": "github-actions[bot]@users.noreply.github.com",
      "date": "2026-02-18T00:35:00Z",
      "additions": 0,
      "deletions": 0
    },
    {
      "sha": "a897516",
      "message": "🌳 Wiki Tree Maintenance: 전체 Wiki는 4개의 주요 카테고리(projects, ai, kubernetes, bun)로 구성되어야 합니다. 현재 루트 레벨에 위치한 비정형 파일(.md)과 삭제된 Opencode 문서가 존재해 URL 깨짐 위험이 있습니다. 파일명은 대부분 slug 규칙을 따르고 있으나, 루트 파일은 이동이 필요합니다.",
      "author": "github-actions[bot]",
      "authorEmail": "github-actions[bot]@users.noreply.github.com",
      "date": "2026-02-11T12:50:57Z",
      "additions": 0,
      "deletions": 0
    },
    {
      "sha": "0190970",
      "message": "🔗 교차 참조 업데이트: 16개 문서",
      "author": "github-actions[bot]",
      "authorEmail": "github-actions[bot]@users.noreply.github.com",
      "date": "2026-02-11T08:01:05Z",
      "additions": 0,
      "deletions": 0
    },
    {
      "sha": "e873878",
      "message": "🌳 Wiki Tree Maintenance: 전체 22개의 문서가 6개의 디렉터리(ci, ai, projects, kubernetes, bun, root) 에 흩어져 있습니다. 루트에 파일이 존재하고,  가 단일 문서만 포함하고 있어 불필요한 카테고리이며, 루트에 있는 Opencode 문서가  와 내용이 중복됩니다. 파일명은 대부분 규칙에 맞지만, 이동·이름 변경이 필요한 문서가 있습니다.",
      "author": "github-actions[bot]",
      "authorEmail": "github-actions[bot]@users.noreply.github.com",
      "date": "2026-02-11T07:48:29Z",
      "additions": 0,
      "deletions": 0
    },
    {
      "sha": "f640314",
      "message": "🔗 교차 참조 업데이트: 14개 문서",
      "author": "github-actions[bot]",
      "authorEmail": "github-actions[bot]@users.noreply.github.com",
      "date": "2026-02-11T06:10:24Z",
      "additions": 0,
      "deletions": 0
    },
    {
      "sha": "ff8a92a",
      "message": "🔗 교차 참조 업데이트: 10개 문서",
      "author": "github-actions[bot]",
      "authorEmail": "github-actions[bot]@users.noreply.github.com",
      "date": "2026-02-11T05:57:28Z",
      "additions": 0,
      "deletions": 0
    },
    {
      "sha": "4cca9d3",
      "message": "🔗 교차 참조 업데이트: 5개 문서",
      "author": "github-actions[bot]",
      "authorEmail": "github-actions[bot]@users.noreply.github.com",
      "date": "2026-02-11T05:14:00Z",
      "additions": 0,
      "deletions": 0
    },
    {
      "sha": "e1cdacf",
      "message": "fix: process-feedback.js에 의해 훼손된 2개 문서 복원",
      "author": "JHL",
      "authorEmail": "bkperio@gmail.com",
      "date": "2026-02-11T14:13:06+09:00",
      "additions": 0,
      "deletions": 0
    },
    {
      "sha": "d026da9",
      "message": "docs: Issue #139 - 피드백 반영",
      "author": "GitHub Action",
      "authorEmail": "action@github.com",
      "date": "2026-02-11T05:10:16Z",
      "additions": 0,
      "deletions": 0
    },
    {
      "sha": "105157f",
      "message": "🔗 교차 참조 업데이트: 17개 문서",
      "author": "github-actions[bot]",
      "authorEmail": "github-actions[bot]@users.noreply.github.com",
      "date": "2026-02-11T04:47:56Z",
      "additions": 0,
      "deletions": 0
    }
  ]
}