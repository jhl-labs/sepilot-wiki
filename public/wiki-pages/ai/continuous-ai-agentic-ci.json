{
  "title": "연속 AI 에이전트 CI 구축 가이드",
  "slug": "ai/continuous-ai-agentic-ci",
  "content": "\n# 연속 AI 에이전트 CI 구축 가이드\n\n이 문서는 CI 파이프라인에 **AI 코드 리뷰 에이전트**를 직접 구현하고, GitHub Actions 를 통해 자동화하는 방법을 단계별로 안내합니다. 아래 섹션에서는 에이전트 설계, CI 통합 단계, 예제 워크플로우 및 베스트 프랙티스를 다룹니다.\n\n---\n\n## 1. AI 코드 리뷰 에이전트 설계\n\n### 1.1 문제점 정의\n- **수동 PR 리뷰**는 리뷰어가 피곤할 때 놓치는 부분이 많고, 동일한 코멘트가 반복됩니다.\n- **빠른 PR**도 컨텍스트 재구축에 45분 정도 소요될 수 있습니다.\n\n### 1.2 AI‑powered 솔루션\nAI 모델을 이용해 모든 Pull Request 를 **구조화된 코드 리뷰**(정확성, 보안, 성능, 테스트) 로 자동 생성합니다. 모델은 OpenAI, Anthropic, OpenRouter, 혹은 로컬 Ollama 인스턴스를 자유롭게 선택할 수 있습니다.\n\n### 1.3 핵심 요소 – 리뷰 루브릭\n리뷰 루브릭(프롬프트/워크플로)은 모델 자체보다 중요한 역할을 합니다. 루브릭은 다음을 강제합니다:\n- **고위험 이슈**와 **사소한 지적** 구분\n- **구체적인 수정 방안** 및 **테스트 제안** 요구\n- “내가 살펴본 내용”과 “확신이 없는 부분” 명시\n\n---\n\n## 2. CI 파이프라인 통합 단계\n\n### 2.1 왜 CI 기반 리뷰인가?\n- **가격 구조**: 채팅 구독은 인터랙티브 사용에 적합하지만, CI 리뷰는 PR 발생 시에만 실행되어 비용 효율적입니다.\n- **사용량 기반 API**: 작은 PR에는 저비용 모델, 대규모 리팩터링에는 고성능 모델을 라우팅할 수 있습니다.\n- **로컬 모델**: Ollama 등 로컬 모델을 사용하면 비용이 거의 제로에 가깝습니다.\n\n### 2.2 DIY 파이프라인 제어 항목\n- 모델 선택 (OpenAI, Anthropic 등)\n- 최대 토큰 수\n- 실행 시점 (PR opened, synchronize, reopened 등)\n- “검토할 가치가 있는” 기준 정의\n\n---\n\n## 3. 예제 워크플로우와 베스트 프랙티스\n\n### 3.1 GitHub Action 정의\n`.github/workflows/ai-code-review.yml` 파일을 생성합니다:\n\n```yaml\nname: AI Code Review\non:\n  pull_request:\n    types: [opened, synchronize, reopened]\njobs:\n  review:\n    runs-on: ubuntu-latest\n    permissions:\n      contents: read\n      pull-requests: write\n    steps:\n      - uses: actions/checkout@v4\n        with:\n          fetch-depth: 0\n      - name: Install Jazz (AI 리뷰 도구)\n        run: npm install -g jazz-ai\n      - name: Run code review workflow\n        run: jazz --output raw workflow run code-review --auto-approve\n        env:\n          OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}\n      - name: Generate review markdown\n        run: jazz --output raw workflow run code-review --auto-approve > review.md\n        env:\n          OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}\n      - name: Comment on PR\n        run: gh pr comment \"$PR_NUMBER\" --body-file review.md\n        env:\n          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n          PR_NUMBER: ${{ github.event.pull_request.number }}\n```\n\n> **참고** `--output raw` 옵션은 CI 환경에서 출력 캡처와 리다이렉션을 쉽게 해줍니다. `--auto-approve` 로 완전 자동화를 구현합니다. 권한은 최소화되었습니다.\n\n### 3.2 리뷰 루브릭 (프롬프트) 정의\n`workflows/code-review/WORKFLOW.md` 파일을 생성하고 아래와 같이 정의합니다:\n\n```markdown\n---\nname: code-review\ndescription: Review PR diff and produce a structured report\nautoApprove: read-only\n---\nReview the current PR diff.\nOutput GitHub‑flavored Markdown with:\n1. **Summary** (2–4 bullets)\n2. **High‑risk issues** (correctness + security)\n3. **Performance / complexity concerns**\n4. **API / UX footguns**\n5. **Test gaps + concrete test suggestions**\n6. **Nitpicks** (style/readability)\n\n**Rules**\n- Be specific: reference files/functions.\n- Prefer minimal diffs / smallest safe fix.\n- If you’re unsure, say so and propose how to verify.\n- No generic advice (“add tests”) — propose exact test cases.\n- Rank issues (High/Medium/Low).\n- List files reviewed, assumptions, and what was not checked.\n```\n\n### 3.3 베스트 프랙티스 체크리스트\n- **읽기 전용 모드**: `autoApprove` 를 `read-only` 로 유지해 에이전트가 저장소를 수정하지 못하도록 합니다.\n- **이슈 순위 매기기**: 모든 이슈에 **High/Medium/Low** 라벨을 부여해 중요도를 명확히 합니다.\n- **오탐 예산**: 잡음이 많으면 무시되므로, 평가 기준을 조정해 오탐을 최소화합니다.\n- **모델 라우팅**: 작은 PR → 저비용 모델, 대규모 리팩터링 → 고성능 모델 사용.\n- **투명성**: 에이전트가 검토한 파일 목록, 가정, 검토하지 않은 항목을 명시하도록 요구합니다.\n\n### 3.4 실제 사례\nJazz 저장소는 자체 코드 리뷰와 릴리즈 노트에 **Jazz** 를 사용합니다. 워크플로 파일은 다음에서 확인할 수 있습니다: https://github.com/lvndry/jazz/tree/main/.github\n\n---\n\n## 4. 마무리\n위 가이드를 따라 CI 파이프라인에 AI 코드 리뷰 에이전트를 구현하면, **자동화된 고품질 리뷰**를 제공하면서 리뷰 비용을 크게 절감할 수 있습니다. 질문이나 개선 사항이 있으면 언제든 이슈를 열어 주세요.\n",
  "lastModified": "2026-02-22T01:20:23Z",
  "author": "GitHub Action",
  "status": "published",
  "isDraft": false,
  "isInvalid": false,
  "tags": [
    "AI",
    "CI",
    "코드 리뷰",
    "에이전트"
  ],
  "order": 3,
  "history": [
    {
      "sha": "bd94672",
      "message": "Merge branch 'main' of https://github.com/jhl-labs/sepilot-wiki",
      "author": "GitHub Action",
      "authorEmail": "action@github.com",
      "date": "2026-02-22T01:20:23Z",
      "additions": 0,
      "deletions": 0
    },
    {
      "sha": "b7db918",
      "message": "Merge branch 'main' of https://github.com/jhl-labs/sepilot-wiki",
      "author": "GitHub Action",
      "authorEmail": "action@github.com",
      "date": "2026-02-21T13:04:23Z",
      "additions": 0,
      "deletions": 0
    }
  ]
}